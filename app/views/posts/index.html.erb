<h1>Blog Posts</h1>

<table class="table table-striped">
  <tr>
    <th>Title</th>
    <th>Content</th>
    <th>Publish Date & Time</th>
    <th></th>
    <th></th>
  </tr>

  <% @posts.each do |post| %>
      <tr>
        <td><%= post.title %></td>

        <% if post.publish_at  %>
            <td><%= truncate post.content, length: 100 %></td>
            <td><%= link_to 'read more', post_path(post), :class => "btn btn-inverse btn-mini" %></td>
            <td><%=  post.publish_at.strftime('%m/%d/%Y %H:%M') %></td>
        <% else %>
            <td>&nbsp;</td>
        <% end  %>

        <% if current_user %>

            <td><%= link_to 'Edit', edit_post_path(post), :class => "btn btn-primary btn-mini" %></td>
            <td><%= link_to 'Delete', posts_path(post), :class => "btn btn-danger btn-mini", :confirm => 'Are you sure?',
                            :method => :delete %></td>
        <% end %>
      </tr>
  <% end %>
</table>

<br />
<% if current_user %>
    <%= link_to 'New posts', new_post_path, :class => "btn btn-primary" %>
<% end %>
